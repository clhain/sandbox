<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><link rel="canonical" href="https://clhain.github.io/sandbox/installation/pre-reqs/" />
      <link rel="shortcut icon" href="../../img/favicon.ico" />
    <title>Common Pre-Reqs - Sandbox Documentation</title>
    <link rel="stylesheet" href="../../css/theme.css" />
    <link rel="stylesheet" href="../../css/theme_extra.css" />
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.5.0/styles/github.min.css" />
    
      <script>
        // Current page data
        var mkdocs_page_name = "Common Pre-Reqs";
        var mkdocs_page_input_path = "installation/pre-reqs.md";
        var mkdocs_page_url = "/sandbox/installation/pre-reqs/";
      </script>
    
    <script src="../../js/jquery-3.6.0.min.js" defer></script>
    <!--[if lt IE 9]>
      <script src="../../js/html5shiv.min.js"></script>
    <![endif]-->
      <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.5.0/highlight.min.js"></script>
      <script>hljs.initHighlightingOnLoad();</script> 
</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side stickynav">
    <div class="wy-side-scroll">
      <div class="wy-side-nav-search">
          <a href="../.." class="icon icon-home"> Sandbox Documentation
        </a><div role="search">
  <form id ="rtd-search-form" class="wy-form" action="../../search.html" method="get">
      <input type="text" name="q" placeholder="Search docs" title="Type search term here" />
  </form>
</div>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../..">Home</a>
                </li>
              </ul>
              <p class="caption"><span class="caption-text">Getting Started</span></p>
              <ul class="current">
                  <li class="toctree-l1"><a class="reference internal" href="../quick-start/">Quick Start</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../getting-started/">Getting Started</a>
                  </li>
                  <li class="toctree-l1 current"><a class="reference internal current" href="./">Common Pre-Reqs</a>
    <ul class="current">
    <li class="toctree-l2"><a class="reference internal" href="#cluster-requirements">Cluster Requirements</a>
        <ul>
    <li class="toctree-l3"><a class="reference internal" href="#node-resources">Node Resources</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#cluster-ingress-ip">Cluster Ingress IP</a>
    </li>
        </ul>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#dns-zone-and-records-access">DNS Zone and Records Access</a>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#lets-encrypt-contact-email">Let's Encrypt Contact Email</a>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#oidc-client-configuration">OIDC Client Configuration</a>
        <ul>
    <li class="toctree-l3"><a class="reference internal" href="#authorized-redirects">Authorized Redirects</a>
    </li>
        </ul>
    </li>
    </ul>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../dns/">DNS Configuration</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../byoc-helm/">Bring Your Own Cluster (Helm)</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../byoc-argocd/">Bring Your Own Cluster (ArgoCD)</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../all-in-one-gke/">All-In-One (GKE)</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">Customization</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../../customization/deploy-an-app/">Deploy Your App</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">Sandbox Apps</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../../services/argocd/">ArgoCD</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../services/cert-manager/">Cert Manager</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../services/gatekeeper/">OPA Gatekeeper</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../services/grafana/">Grafana</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../services/loki/">Loki</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../services/nginx-ingress/">NGINX Kubernetes Ingress</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../services/nginx-mesh/">NGINX Service Mesh</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../services/oauth-proxy/">Oauth2 Proxy</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../services/opentelemetry-operator/">Opentelemetry Operator</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../services/prometheus-operator/">Prometheus Operator</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../services/sealed-secrets/">Sealed Secrets</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../services/tempo/">Tempo</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">Misc</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../../troubleshooting/">Troubleshooting</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../faq/">Frequently Asked Questions</a>
                  </li>
              </ul>
      </div>
    </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">
      <nav class="wy-nav-top" role="navigation" aria-label="Mobile navigation menu">
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../..">Sandbox Documentation</a>
        
      </nav>
      <div class="wy-nav-content">
        <div class="rst-content"><div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="../.." class="icon icon-home" alt="Docs"></a> &raquo;</li>
          <li>Getting Started &raquo;</li>
      <li>Common Pre-Reqs</li>
    <li class="wy-breadcrumbs-aside">
    </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
            <div class="section" itemprop="articleBody">
              
                <h1 id="sandbox-pre-requisites">Sandbox Pre-Requisites</h1>
<p>The following things are required to enable all Sandbox functionality. The <a href="../quick-start/">Quick Start</a> based
install (using kind) has no up-front requirements, but some features won't work. The requirements here are common
for all fully-featured installations regardless of the install methd. Additional installation specific
requirements can be found in the dedicated guides for the All-In-One and Bring Your Own Cluster guides.</p>
<h2 id="cluster-requirements">Cluster Requirements</h2>
<h3 id="node-resources">Node Resources</h3>
<p>The default Sandbox cluster resource utilization at idle is approximately as follows (3 node GKE cluster with e2-standard-2 nodes):</p>
<p><img alt="Resource Utilization" src="../../img/sandbox-resources.png" /></p>
<p>Size your nodes taking these baseline performance stats and the specific requirements of your additional apps / services into account.</p>
<h3 id="cluster-ingress-ip">Cluster Ingress IP</h3>
<p>The Container ingress service requires a static IP address for use with service host records (see DNS section below).</p>
<p><strong><em>Alternatives</em></strong>
In order to use the Lets Encrypt certificate issuer, the IP must be publicly accessible for the HTTP verification process.
If you don't wish to use this feature, you can either:</p>
<ul>
<li>Disable the TLS endpoints with helm argument --set clusterTLSInsecure=true</li>
<li>Modify the cert-manager or virtual-servers to work with alternate settings (see <a href="../../customization/default-services/">Customizing Default Services</a>)</li>
</ul>
<h2 id="dns-zone-and-records-access">DNS Zone and Records Access</h2>
<p>In order to direct external traffic to Sandbox cluster services (and any you'll add
yourself), you'll need to have a DNS domain and administrative access to create host records.</p>
<p>There are many different services available for this, and we make no specific recommendations.</p>
<p>See the <a href="../dns/">DNS Configuration</a> guide for more info. If you're installing the Sandbox via Porter bundle,
you'll have to wait until the cluster is created to find the ingress IP assigned.</p>
<p><strong><em>Alternatives</em></strong>
If you don't have an available DNS domain, you can use a service like <a href="https://nip.io">nip.io</a> which automatically
directs <code>*.[your-ip].nip.io</code> to the ip specified by setting the Cluster Domain to <code>[your-ip].nip.io</code> at install time.
This method isn't compatible with Automatic SSL Certs from LetsEncrypt, so you'll also need to either:</p>
<ul>
<li>Disable the TLS endpoints with helm argument <code>--set clusterTLSInsecure=true</code></li>
<li>Modify the cert-manager or virtual-servers to work with alternate settings (see <a href="../../customization/default-services/">Customizing Default Services</a>)</li>
</ul>
<h2 id="lets-encrypt-contact-email">Let's Encrypt Contact Email</h2>
<p>Automated SSL certificate generation via Cert Manager and Let's Encrypt requires an
email be provided so they can contact someone regarding problems with the cert, etc.
There is no requirement that the email address be associated with a Let's Encrypt account, it
can just be any email address you have access to.</p>
<p>You don't need to provide this if you're using an alternate Cluster Issuer or have disabled TLS endpoints.</p>
<h2 id="oidc-client-configuration">OIDC Client Configuration</h2>
<p>The default sandbox installation comes with <a href="https://https://dexidp.io/">Dex</a> and a pre-configured admin account. The process for using an external
identity provider is as follows:</p>
<p>The Oauth2 Proxy documents has excellent <a href="https://oauth2-proxy.github.io/oauth2-proxy/docs/configuration/oauth_provider">provider-specific instructions</a>
for obtaining the needed values and configuring the provider for use. In general, you'll need the following:</p>
<ol>
<li>The OIDC Client ID from the provider.</li>
<li>The OIDC Client Secret from the provider.</li>
<li>The OIDC Issuer URL for the provider.</li>
</ol>
<h3 id="authorized-redirects">Authorized Redirects</h3>
<p>You'll also need to set the following redirect locations as authorized for the client:</p>
<pre><code class="language-text">https://argocd.YOURDOMAIN.COM/auth/callback
https://auth.YOURDOMAIN.COM/oauth2/callback
</code></pre>
<p>See the <a href="https://github.com/clhain/sandbox/services/oauth-proxy/README.md">Oauth2 Proxy</a> doc in this repo for more information.</p>
              
            </div>
          </div><footer>
    <div class="rst-footer-buttons" role="navigation" aria-label="Footer Navigation">
        <a href="../getting-started/" class="btn btn-neutral float-left" title="Getting Started"><span class="icon icon-circle-arrow-left"></span> Previous</a>
        <a href="../dns/" class="btn btn-neutral float-right" title="DNS Configuration">Next <span class="icon icon-circle-arrow-right"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <!-- Copyright etc -->
  </div>

  Built with <a href="https://www.mkdocs.org/">MkDocs</a> using a <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>.
</footer>
          
        </div>
      </div>

    </section>

  </div>

  <div class="rst-versions" role="note" aria-label="Versions">
  <span class="rst-current-version" data-toggle="rst-current-version">
    
    
      <span><a href="../getting-started/" style="color: #fcfcfc">&laquo; Previous</a></span>
    
    
      <span><a href="../dns/" style="color: #fcfcfc">Next &raquo;</a></span>
    
  </span>
</div>
    <script>var base_url = '../..';</script>
    <script src="../../js/theme_extra.js" defer></script>
    <script src="../../js/theme.js" defer></script>
      <script src="../../search/main.js" defer></script>
    <script defer>
        window.onload = function () {
            SphinxRtdTheme.Navigation.enable(true);
        };
    </script>

</body>
</html>
